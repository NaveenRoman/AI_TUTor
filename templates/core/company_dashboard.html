<!DOCTYPE html>
<html>
<head>
    <title>Company Dashboard</title>
    <style>
        body { font-family: Inter; padding:40px; background:#f4f7fb; }
        .card { background:white; padding:25px; border-radius:12px;
                box-shadow:0 10px 25px rgba(0,0,0,0.06); margin-bottom:20px; }
        button { padding:10px 18px; border:none; border-radius:8px;
                 background:#6366f1; color:white; font-weight:600; }
    </style>
</head>
<body>

<h2>üè¢ {{ company.name }} ‚Äî Hiring Dashboard</h2>

<div class="card">
    <h3>Filter Students</h3>

    <form id="filterForm">
        Min Readiness:
        <input type="number" id="readiness" value="50">

        Min Probability:
        <input type="number" step="0.1" id="probability" value="0.4">

        <button type="button" onclick="fetchStudents()">Search</button>
    </form>
</div>

<div class="card">
    <h3>Ranked Candidates</h3>
    <div id="results"></div>
</div>

<script>
async function fetchStudents() {
    const readiness = document.getElementById("readiness").value;
    const probability = document.getElementById("probability").value;

    const res = await fetch(
        `/api/company/filter/?min_readiness=${readiness}&min_probability=${probability}`
    );

    const data = await res.json();

    let html = "";

    data.results.forEach(s => {
        html += `
            <p>
                <strong>${s.username}</strong>
                | Readiness: ${s.readiness}%
                | AI Probability: ${s.probability}
                | Risk: ${s.risk_level}
            </p>
        `;
    });

    document.getElementById("results").innerHTML = html;
}
</script>

</body>
</html>
